<?xml version="1.0" encoding="utf-8"?>

<Window
  x:Class="Xbox360MemoryCarver.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:tabs="using:Xbox360MemoryCarver"
  Title="Xbox 360 Memory Carver">

  <Grid>
    <!--  Title bar with app name (behind NavigationView so expanded pane covers it)  -->
    <Grid
      x:Name="AppTitleBar"
      Height="32"
      Margin="33,0,0,0"
      HorizontalAlignment="Stretch"
      VerticalAlignment="Top"
      Background="Transparent">
      <StackPanel
        Orientation="Horizontal"
        VerticalAlignment="Center">
        <Image
          Width="16"
          Height="16"
          Margin="8,0,8,0"
          VerticalAlignment="Center"
          Source="Assets/StoreLogo.png"/>
        <TextBlock
          VerticalAlignment="Center"
          FontSize="12"
          Text="Xbox 360 Memory Carver"/>
      </StackPanel>
    </Grid>

    <!--  Navigation View with hamburger menu - fills entire window  -->
    <NavigationView
      x:Name="NavView"
      Background="Transparent"
      IsBackButtonVisible="Collapsed"
      IsPaneToggleButtonVisible="True"
      IsSettingsVisible="False"
      IsTitleBarAutoPaddingEnabled="True"
      OpenPaneLength="200"
      PaneDisplayMode="LeftCompact"
      SelectionChanged="NavView_SelectionChanged">

      <!--  Make NavigationView content area transparent so Mica shows in title bar  -->
      <NavigationView.Resources>
        <SolidColorBrush x:Key="NavigationViewContentBackground"
                         Color="Transparent"/>
        <SolidColorBrush x:Key="NavigationViewContentGridBorderBrush"
                         Color="Transparent"/>
      </NavigationView.Resources>

      <NavigationView.MenuItems>
        <NavigationViewItemHeader Content="Minidump"/>

        <!--  Single File Analysis  -->
        <NavigationViewItem
          Content="Single File"
          IsSelected="True"
          Tag="SingleFile">
          <NavigationViewItem.Icon>
            <FontIcon Glyph="&#xE8A5;"/>
          </NavigationViewItem.Icon>
        </NavigationViewItem>

        <!--  Batch Mode  -->
        <NavigationViewItem
          Content="Batch Mode"
          Tag="BatchMode">
          <NavigationViewItem.Icon>
            <FontIcon Glyph="&#xE8B7;"/>
          </NavigationViewItem.Icon>
        </NavigationViewItem>

        <NavigationViewItemSeparator/>

        <NavigationViewItemHeader Content="Converters"/>

        <!--  NIF Converter  -->
        <NavigationViewItem
          Content="NIF Converter"
          Tag="NifConverter">
          <NavigationViewItem.Icon>
            <FontIcon Glyph="&#xF158;"/>
          </NavigationViewItem.Icon>
        </NavigationViewItem>

        <!--  DDX Converter  -->
        <NavigationViewItem
          Content="DDX Converter"
          Tag="DdxConverter">
          <NavigationViewItem.Icon>
            <FontIcon Glyph="&#xEB9F;"/>
          </NavigationViewItem.Icon>
        </NavigationViewItem>

        <!--  BSA Extractor  -->
        <NavigationViewItem
          Content="BSA Extractor"
          Tag="BsaExtractor">
          <NavigationViewItem.Icon>
            <FontIcon Glyph="&#xE7B8;"/>
          </NavigationViewItem.Icon>
        </NavigationViewItem>
      </NavigationView.MenuItems>

      <!--  Main content area  -->
      <Grid Background="Transparent">
        <Grid.RowDefinitions>
          <RowDefinition Height="32"/>
          <!--  Window controls area (title bar)  -->
          <RowDefinition Height="*"/>
          <!--  Content  -->
          <RowDefinition Height="Auto"/>
          <!--  Status bar  -->
        </Grid.RowDefinitions>

        <!--  Tab content with rounded corners at top-left and bottom-left  -->
        <Border
          Grid.Row="1"
          Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
          CornerRadius="8,0,0,8">
          <Grid VerticalAlignment="Stretch">
            <tabs:SingleFileTab
              x:Name="SingleFileTabContent"
              VerticalAlignment="Stretch"
              Visibility="Visible"/>
            <tabs:BatchModeTab
              x:Name="BatchModeTabContent"
              VerticalAlignment="Stretch"
              Visibility="Collapsed"/>
            <tabs:NifConverterTab
              x:Name="NifConverterTabContent"
              VerticalAlignment="Stretch"
              Visibility="Collapsed"/>
            <tabs:DdxConverterTab
              x:Name="DdxConverterTabContent"
              VerticalAlignment="Stretch"
              Visibility="Collapsed"/>
            <tabs:BsaExtractorTab
              x:Name="BsaExtractorTabContent"
              VerticalAlignment="Stretch"
              Visibility="Collapsed"/>
          </Grid>
        </Border>

        <!--  Status bar (same transparent Mica as title bar)  -->
        <Grid
          Grid.Row="2"
          Height="24"
          Padding="15,0,16,0"
          Background="Transparent">
          <TextBlock
            x:Name="GlobalStatusTextBlock"
            VerticalAlignment="Center"
            FontSize="12"
            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
            Text=""/>
        </Grid>
      </Grid>
    </NavigationView>
  </Grid>
</Window>
